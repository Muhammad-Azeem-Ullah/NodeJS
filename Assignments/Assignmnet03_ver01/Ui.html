<html><head></head><body style="background-color: #2796c0;"><h1 style="
    margin-left: 41%;
    margin-top: 7%;
    font-family: inherit;
    color: #3a4a76;
    font-size: 47px;
"> Coupon Stall </h1>

<div style="overflow:hidden; background-color: #1b4749;width: 800px;height: 800px;padding-top: 5px;margin-top: 5%;margin-left: 22%;">
<div style="
    margin-top: 13%;
    margin-left: 10%;
    margin-right: 10%;
">
    <input id="generate_coupon_size" name="generate_coupon_size" placeholder="Enter number to generate coupons" style="
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    opacity: 0.85;
    display: inline-block;
    font-size: 17px;
    line-height: 20px;
    text-decoration: none; /* remove underline from anchors */
    /* margin-left: 3%; */
"><input id="generate_button" type="submit" value="Generate coupon" style="
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    opacity: 0.85;
    display: inline-block;
    font-size: 17px;
    line-height: 20px;
    text-decoration: none;
    ">
    <div id="generated_response">
           

    </div>
  
    
    </div><hr style="
    display: block;
    margin-top: 5.5em;
    margin-bottom: 0.5em;
    margin-left: auto;
    margin-right: auto;
    border-style: inset;
    border-width: 2px;
    width: 91%;
"><div style="
    margin-top: 20%;
    margin-left: 10%;
    margin-right: 10%;
">
    <input id="redeem_coupon" name="redeem_coupon" placeholder="Enter coupon to redeem" style="
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    opacity: 0.85;
    display: inline-block;
    font-size: 17px;
    line-height: 20px;
    text-decoration: none; /* remove underline from anchors */
    /* margin-left: 3%; */
"><input id="redeem_btn" type="submit" value="Redeem Coupon" style="
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    opacity: 0.85;
    display: inline-block;
    font-size: 17px;
    line-height: 20px;
    text-decoration: none;
    ">
    
    <div id="redeem_response">
     

    </div>
    
    </div>
</div>
</body></html>
<script>
document.getElementById("generate_button").addEventListener("click", generate);
document.getElementById("redeem_btn").addEventListener("click", redeem);
var ws = new WebSocket( "ws://localhost:8081" );
ws.onopen = function (){
  alert("Connected with Coupon Stalls");
  alert("Welcome !");
};

ws.onmessage = function ( payload )
{
    
    data_res = JSON.parse( payload.data );
    if( data_res.mode == "generate" )
    {

        document.getElementById("generated_response").innerHTML = '    <p  style="\
            color: green;\
            font-size: larger;\
            font-family: unset;\
        "> '+ data_res.response +'</p>' ;
    


    }
    else if( data_res.mode == "redeem" )
    {
       
        if( data_res.status == "200" )
        {
          
            document.getElementById("redeem_response").innerHTML = '    <p  style="\
            color: green;\
            font-size: larger;\
            font-family: unset;\
        "> '+ data_res.response +'</p>' ;

        }
        else
        {
            document.getElementById("redeem_response").innerHTML = '    <p  style="\
            color: red;\
            font-size: larger;\
            font-family: unset;\
        "> '+ data_res.response +'</p>' ;
        }
 

    }
}
ws.onclose = function (){
  alert("Disconnected with Coupon Stalls");
};

function generate() {
    ws.send(JSON.stringify({
        mode : 'generate',
  size : document.getElementById("generate_coupon_size").value
}));
}

function redeem() {
    ws.send(JSON.stringify({
        mode : 'redeem',
        coupon : document.getElementById("redeem_coupon").value
}));

}
</script>